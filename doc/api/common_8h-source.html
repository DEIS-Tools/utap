<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libutap: common.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>common.h</h1><a href="common_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">// -*- mode: C++; c-file-style: "stroustrup"; c-basic-offset: 4; -*-</span>
00002 
00003 <span class="comment">/* libutap - Uppaal Timed Automata Parser.</span>
00004 <span class="comment">   Copyright (C) 2002 Uppsala University and Aalborg University.</span>
00005 <span class="comment">   </span>
00006 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00007 <span class="comment">   modify it under the terms of the GNU Lesser General Public License</span>
00008 <span class="comment">   as published by the Free Software Foundation; either version 2.1 of</span>
00009 <span class="comment">   the License, or (at your option) any later version.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful, but</span>
00012 <span class="comment">   WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00014 <span class="comment">   Lesser General Public License for more details.</span>
00015 <span class="comment"></span>
00016 <span class="comment">   You should have received a copy of the GNU Lesser General Public</span>
00017 <span class="comment">   License along with this library; if not, write to the Free Software</span>
00018 <span class="comment">   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
00019 <span class="comment">   USA</span>
00020 <span class="comment">*/</span>
00021 
00022 <span class="preprocessor">#ifndef UTAP_COMMON_HH</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define UTAP_COMMON_HH</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#ifdef __MINGW32__</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdint.h&gt;</span>
00027 <span class="preprocessor">#else</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#include &lt;inttypes.h&gt;</span>
00029 <span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string&gt;</span>
00031 <span class="preprocessor">#include &lt;iostream&gt;</span>
00032 <span class="preprocessor">#include &lt;vector&gt;</span>
00033 
00034 <span class="keyword">namespace </span>UTAP
00035 {
<a name="l00036"></a><a class="code" href="classUTAP_1_1XPath.html">00036</a>     <span class="keyword">class </span><a class="code" href="classUTAP_1_1XPath.html">XPath</a>
00037     {
00038     <span class="keyword">public</span>:
<a name="l00039"></a><a class="code" href="classUTAP_1_1XPath.html#a0">00039</a>         <span class="keyword">virtual</span> <a class="code" href="classUTAP_1_1XPath.html#a0">~XPath</a>() {};
00040         <span class="keyword">virtual</span> <span class="keywordtype">char</span> *<a class="code" href="classUTAP_1_1XPath.html#a1">get</a>() const = 0;
00041     };
00042     
<a name="l00043"></a><a class="code" href="structUTAP_1_1position__t.html">00043</a>     struct <a class="code" href="structUTAP_1_1position__t.html">position_t</a> 
00044     {
<a name="l00045"></a><a class="code" href="structUTAP_1_1position__t.html#o2">00045</a>         int32_t first_line, first_column, last_line, last_column;
<a name="l00046"></a><a class="code" href="structUTAP_1_1position__t.html#a0">00046</a>         position_t() {}
<a name="l00047"></a><a class="code" href="structUTAP_1_1position__t.html#a1">00047</a>         position_t(<span class="keywordtype">int</span> fl, <span class="keywordtype">int</span> fc, <span class="keywordtype">int</span> ll, <span class="keywordtype">int</span> lc)
00048             : first_line(fl), first_column(fc), last_line(ll), last_column(lc)
00049             {}
00050     };
00051 
<a name="l00052"></a><a class="code" href="classUTAP_1_1ErrorHandler.html">00052</a>     <span class="keyword">class </span><a class="code" href="classUTAP_1_1ErrorHandler.html">ErrorHandler</a>
00053     {
00054     <span class="keyword">public</span>:
<a name="l00055"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">00055</a>         <span class="keyword">struct </span><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>
00056         {
<a name="l00057"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">00057</a>             int32_t fline, fcolumn, lline, lcolumn;
00058 
<a name="l00059"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">00059</a>             <span class="keywordtype">char</span>* xpath;
<a name="l00060"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">00060</a>             <span class="keywordtype">char</span>* msg;
00061 
<a name="l00062"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a0">00062</a>             <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>(int32_t fl, int32_t fc, int32_t ll, int32_t lc)
00063                 : fline(fl), fcolumn(fc), lline(ll), lcolumn(lc), 
00064                   xpath(NULL), msg(NULL){}
00065 
<a name="l00066"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a1">00066</a>             <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>(<span class="keyword">const</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a> &amp;err)
00067                 : fline(err.fline), fcolumn(err.fcolumn),
00068                   lline(err.lline), lcolumn(err.lcolumn),
00069                   xpath(copy(err.xpath)), msg(copy(err.msg)) {}
00070 
<a name="l00071"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a2">00071</a>             ~<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>() { <span class="keyword">delete</span> [] xpath; <span class="keyword">delete</span>[] msg; }
00072 
<a name="l00073"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a3">00073</a>             <span class="keywordtype">char</span> *copy(<span class="keyword">const</span> <span class="keywordtype">char</span> *s) {
00074                 <span class="keywordflow">return</span> (s ? strcpy(<span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(s) + 1], s) : NULL);
00075             }
00076             
<a name="l00077"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a4">00077</a>             <span class="keywordtype">void</span> setPath(<span class="keywordtype">char</span> *path) {
00078                 <span class="keyword">delete</span>[] xpath;
00079                 xpath = path;
00080             };
00081 
<a name="l00082"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a5">00082</a>             <span class="keywordtype">void</span> setMessage(<span class="keyword">const</span> <span class="keywordtype">char</span> *value) {
00083                 <span class="keyword">delete</span>[] msg;
00084                 msg = copy(value);
00085             }
00086         };
00087     <span class="keyword">private</span>:
00088         std::vector&lt;error_t&gt; errors;
00089         std::vector&lt;error_t&gt; warnings;
00090         <span class="keyword">const</span> <a class="code" href="classUTAP_1_1XPath.html">XPath</a> *currentPath;
00091         <span class="keywordtype">int</span> first_line, first_column, last_line, last_column;
00092     <span class="keyword">public</span>:
00093         <a class="code" href="classUTAP_1_1ErrorHandler.html">ErrorHandler</a>();
00094 
00095         <span class="comment">// Sets the call back object for the current patch.</span>
00096         <span class="comment">// Clears the current position.</span>
00097         <span class="keywordtype">void</span> setCurrentPath(<span class="keyword">const</span> <a class="code" href="classUTAP_1_1XPath.html">XPath</a> *path);
00098 
00099         <span class="comment">// Sets the current position of the parser. Any errors or</span>
00100         <span class="comment">// warnings will be assumed to be at this position.</span>
00101         <span class="keywordtype">void</span> setCurrentPosition(<span class="keywordtype">int</span> first_line, <span class="keywordtype">int</span> first_column, <span class="keywordtype">int</span> last_line, <span class="keywordtype">int</span> last_column);
00102 
00103         <span class="comment">// Sets the current position of the parser. Any errors or</span>
00104         <span class="comment">// warnings will be assumed to be at this position.</span>
00105         <span class="keywordtype">void</span> setCurrentPosition(<span class="keyword">const</span> <a class="code" href="structUTAP_1_1position__t.html">position_t</a> &amp;);
00106 
00107         <span class="comment">// Called when an error is detected</span>
00108         <span class="keywordtype">void</span> handleError(<span class="keyword">const</span> <span class="keywordtype">char</span> *, ...);
00109 
00110         <span class="comment">// Called when a warning is issued</span>
00111         <span class="keywordtype">void</span> handleWarning(<span class="keyword">const</span> <span class="keywordtype">char</span> *, ...);
00112 
00113         <span class="comment">// Returns the errors</span>
00114         <span class="keyword">const</span> std::vector&lt;error_t&gt; &amp;getErrors() const;
00115 
00116         <span class="comment">// Returns the warnings</span>
00117         const std::vector&lt;error_t&gt; &amp;getWarnings() const;
00118 
00119         <span class="comment">// True if there are one or more errors</span>
00120         <span class="keywordtype">bool</span> hasErrors() const;
00121 
00122         <span class="comment">// True if there are one or more warnings</span>
00123         <span class="keywordtype">bool</span> hasWarnings() const;
00124 
00125         <span class="comment">// Clears the list of errors and warnings</span>
00126         <span class="keywordtype">void</span> clear();
00127     };
00128 
<a name="l00129"></a><a class="code" href="namespaceUTAP_1_1Constants.html">00129</a>     namespace Constants
00130     {
<a name="l00131"></a><a class="code" href="namespaceUTAP_1_1Constants.html#a54">00131</a>         <span class="keyword">enum</span> <a class="code" href="namespaceUTAP_1_1Constants.html#a54">kind_t</a> 
00132         {
00133             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a0">PLUS</a> = 0,
00134             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a1">MINUS</a> = 1,
00135             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a2">MULT</a> = 2,
00136             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a3">DIV</a> = 3,
00137             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a4">MOD</a> = 4,
00138             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a5">BIT_AND</a> = 5,
00139             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a6">BIT_OR</a> = 6,
00140             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a7">BIT_XOR</a> = 7,
00141             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a8">BIT_LSHIFT</a> = 8,
00142             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a9">BIT_RSHIFT</a> = 9,
00143             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a10">AND</a> = 10,
00144             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a11">OR</a> = 11,
00145             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a12">MIN</a> = 12,
00146             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a13">MAX</a> = 13,
00147 
00148             <span class="comment">/********************************************************</span>
00149 <span class="comment">             * Relational operators</span>
00150 <span class="comment">             */</span>
00151             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a14">LT</a> = 20,
00152             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a15">LE</a> = 21,
00153             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a16">EQ</a> = 22,
00154             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a17">NEQ</a> = 23,
00155             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a18">GE</a> = 24,
00156             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a19">GT</a> = 25,
00157 
00158             <span class="comment">/********************************************************</span>
00159 <span class="comment">             * Unary operators</span>
00160 <span class="comment">             */</span>
00161             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a20">NOT</a> = 30,
00162 
00163             <span class="comment">/********************************************************</span>
00164 <span class="comment">             * Assignment operators</span>
00165 <span class="comment">             */</span>
00166             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a21">ASSIGN</a> = 40,
00167             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a22">ASSPLUS</a> = 41,
00168             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a23">ASSMINUS</a> = 42,
00169             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a24">ASSDIV</a> = 43,
00170             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a25">ASSMOD</a> = 44,
00171             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a26">ASSMULT</a> = 45,
00172             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a27">ASSAND</a> = 46,
00173             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a28">ASSOR</a> = 47,
00174             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a29">ASSXOR</a> = 48,
00175             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a30">ASSLSHIFT</a> = 49,
00176             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a31">ASSRSHIFT</a> = 50,
00177 
00178             <span class="comment">/*******************************************************</span>
00179 <span class="comment">             * CTL Quantifiers</span>
00180 <span class="comment">             */</span>
00181             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a32">EF</a> = 60,
00182             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a33">EG</a> = 61,
00183             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a34">AF</a> = 62,
00184             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a35">AG</a> = 63,
00185             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a36">LEADSTO</a> = 64,
00186 
00187             <span class="comment">/*******************************************************</span>
00188 <span class="comment">             * Additional constants used by ExpressionProgram's and</span>
00189 <span class="comment">             * the TypeCheckBuilder (but not by the parser, although</span>
00190 <span class="comment">             * some of then ought to be used, FIXME).</span>
00191 <span class="comment">             */</span>
00192             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a37">IDENTIFIER</a> = 512,
00193             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a38">CONSTANT</a> = 513,
00194             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a39">ARRAY</a> = 514,
00195             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a40">POSTINCREMENT</a> = 515,
00196             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a41">PREINCREMENT</a> = 516,
00197             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a42">POSTDECREMENT</a> = 517,
00198             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a43">PREDECREMENT</a> = 518,
00199             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a44">UNARY_MINUS</a> = 519,
00200             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a45">LIST</a> = 520,
00201             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a46">DOT</a> = 521,
00202             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a47">INLINEIF</a> = 522,
00203             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a48">COMMA</a> = 523,
00204             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a49">SYNC</a> = 525,
00205             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a50">DEADLOCK</a> = 526,
00206             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a51">FUNCALL</a> = 527
00207         };
00208 
00209         <span class="comment">/**********************************************************</span>
00210 <span class="comment">         * Synchronisations:</span>
00211 <span class="comment">         */</span>
<a name="l00212"></a><a class="code" href="namespaceUTAP_1_1Constants.html#a55">00212</a>         <span class="keyword">enum</span> <a class="code" href="namespaceUTAP_1_1Constants.html#a55">synchronisation_t</a> 
00213         {
00214             <a class="code" href="namespaceUTAP_1_1Constants.html#a55a52">SYNC_QUE</a> = 0,
00215             <a class="code" href="namespaceUTAP_1_1Constants.html#a55a53">SYNC_BANG</a> = 1
00216         };
00217     }
00218 
<a name="l00220"></a><a class="code" href="namespaceUTAP.html#a13">00220</a>     <span class="keyword">typedef</span> <span class="keyword">enum</span> 
00221     { 
00222         <a class="code" href="namespaceUTAP.html#a13a0">S_XTA</a>, <span class="comment">// entire system </span>
00223         <a class="code" href="namespaceUTAP.html#a13a1">S_DECLARATION</a>, <a class="code" href="namespaceUTAP.html#a13a2">S_LOCAL_DECL</a>, <a class="code" href="namespaceUTAP.html#a13a3">S_INST</a>, <a class="code" href="namespaceUTAP.html#a13a4">S_SYSTEM</a>, <a class="code" href="namespaceUTAP.html#a13a5">S_PARAMETERS</a>, 
00224         <a class="code" href="namespaceUTAP.html#a13a6">S_INVARIANT</a>, <a class="code" href="namespaceUTAP.html#a13a7">S_GUARD</a>, <a class="code" href="namespaceUTAP.html#a13a8">S_SYNC</a>, <a class="code" href="namespaceUTAP.html#a13a9">S_ASSIGN</a>, <a class="code" href="namespaceUTAP.html#a13a10">S_EXPRESSION</a>, <a class="code" href="namespaceUTAP.html#a13a11">S_PROPERTY</a>
00225     } xta_part_t;
00226 
00227 }
00228 
00229 std::ostream &amp;<a class="code" href="namespaceUTAP.html#a12">operator &lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">UTAP::ErrorHandler::error_t</a> &amp;e);
00230 
00231 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Thu Jun 17 10:39:55 2004 for libutap by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
