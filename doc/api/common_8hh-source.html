<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libutap: common.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>common.hh</h1><a href="common_8hh.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">// -*- mode: C++; c-file-style: "stroustrup"; c-basic-offset: 4; -*-</span>
00002 
00003 <span class="comment">/* libutap - Uppaal Timed Automata Parser.</span>
00004 <span class="comment">   Copyright (C) 2002 Uppsala University and Aalborg University.</span>
00005 <span class="comment">   </span>
00006 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00007 <span class="comment">   modify it under the terms of the GNU Lesser General Public License</span>
00008 <span class="comment">   as published by the Free Software Foundation; either version 2.1 of</span>
00009 <span class="comment">   the License, or (at your option) any later version.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful, but</span>
00012 <span class="comment">   WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00014 <span class="comment">   Lesser General Public License for more details.</span>
00015 <span class="comment"></span>
00016 <span class="comment">   You should have received a copy of the GNU Lesser General Public</span>
00017 <span class="comment">   License along with this library; if not, write to the Free Software</span>
00018 <span class="comment">   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
00019 <span class="comment">   USA</span>
00020 <span class="comment">*/</span>
00021 
00022 <span class="preprocessor">#ifndef UTAP_COMMON_HH</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define UTAP_COMMON_HH</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#ifdef __MINGW32__</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdint.h&gt;</span>
00027 <span class="preprocessor">#else</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#include &lt;inttypes.h&gt;</span>
00029 <span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string&gt;</span>
00031 <span class="preprocessor">#include &lt;iostream&gt;</span>
00032 <span class="preprocessor">#include &lt;vector&gt;</span>
00033 
00034 <span class="keyword">namespace </span>UTAP
00035 {
<a name="l00036"></a><a class="code" href="classUTAP_1_1XPath.html">00036</a>     <span class="keyword">class </span><a class="code" href="classUTAP_1_1XPath.html">XPath</a>
00037     {
00038     <span class="keyword">public</span>:
00039         <span class="keyword">virtual</span> <span class="keywordtype">char</span> *<a class="code" href="classUTAP_1_1XPath.html#a0">get</a>() <span class="keyword">const</span> = 0;
00040     };
00041     
<a name="l00042"></a><a class="code" href="structUTAP_1_1position__t.html">00042</a>     <span class="keyword">struct </span><a class="code" href="structUTAP_1_1position__t.html">position_t</a> {
<a name="l00043"></a><a class="code" href="structUTAP_1_1position__t.html#o2">00043</a>         int32_t <a class="code" href="structUTAP_1_1position__t.html#o0">first_line</a>, <a class="code" href="structUTAP_1_1position__t.html#o1">first_column</a>, <a class="code" href="structUTAP_1_1position__t.html#o2">last_line</a>, <a class="code" href="structUTAP_1_1position__t.html#o3">last_column</a>;
<a name="l00044"></a><a class="code" href="structUTAP_1_1position__t.html#a0">00044</a>         <a class="code" href="structUTAP_1_1position__t.html#a0">position_t</a>() {}
<a name="l00045"></a><a class="code" href="structUTAP_1_1position__t.html#a1">00045</a>         <a class="code" href="structUTAP_1_1position__t.html#a0">position_t</a>(<span class="keywordtype">int</span> fl, <span class="keywordtype">int</span> fc, <span class="keywordtype">int</span> ll, <span class="keywordtype">int</span> lc)
00046             : <a class="code" href="structUTAP_1_1position__t.html#o0">first_line</a>(fl), <a class="code" href="structUTAP_1_1position__t.html#o1">first_column</a>(fc), <a class="code" href="structUTAP_1_1position__t.html#o2">last_line</a>(ll), <a class="code" href="structUTAP_1_1position__t.html#o3">last_column</a>(lc)
00047             {}
00048     };
00049 
<a name="l00050"></a><a class="code" href="classUTAP_1_1ErrorHandler.html">00050</a>     <span class="keyword">class </span><a class="code" href="classUTAP_1_1ErrorHandler.html">ErrorHandler</a>
00051     {
00052     <span class="keyword">public</span>:
<a name="l00053"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">00053</a>         <span class="keyword">struct </span><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>
00054         {
<a name="l00055"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">00055</a>             int32_t <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o0">fline</a>, <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o1">fcolumn</a>, <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">lline</a>, <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o3">lcolumn</a>;
00056 
<a name="l00057"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">00057</a>             <span class="keywordtype">char</span>* <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>;
<a name="l00058"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">00058</a>             <span class="keywordtype">char</span>* <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>;
00059 
<a name="l00060"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a0">00060</a>             <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>(int32_t fl, int32_t fc, int32_t ll, int32_t lc)
00061                 : <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o0">fline</a>(fl), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o1">fcolumn</a>(fc), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">lline</a>(ll), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o3">lcolumn</a>(lc), 
00062                   <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>(NULL), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>(NULL){}
00063 
<a name="l00064"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a1">00064</a>             <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a>(<span class="keyword">const</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">error_t</a> &amp;err)
00065                 : <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o0">fline</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o0">fline</a>), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o1">fcolumn</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o1">fcolumn</a>),
00066                   <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">lline</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o2">lline</a>), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o3">lcolumn</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o3">lcolumn</a>),
00067                   <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>(<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a3">copy</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>)), <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>(<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a3">copy</a>(err.<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>)) {}
00068 
<a name="l00069"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a2">00069</a>             <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a2">~error_t</a>() { <span class="keyword">delete</span> [] <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>; <span class="keyword">delete</span>[] <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>; }
00070 
<a name="l00071"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a3">00071</a>             <span class="keywordtype">char</span> *<a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a3">copy</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s) {
00072                 <span class="keywordflow">return</span> (s ? strcpy(<span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(s) + 1], s) : NULL);
00073             }
00074             
<a name="l00075"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a4">00075</a>             <span class="keywordtype">void</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a4">setPath</a>(<span class="keywordtype">char</span> *path) {
00076                 <span class="keyword">delete</span>[] <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a>;
00077                 <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o4">xpath</a> = path;
00078             };
00079 
<a name="l00080"></a><a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a5">00080</a>             <span class="keywordtype">void</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#a5">setMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *value) {
00081                 <span class="keyword">delete</span>[] <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a>;
00082                 <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html#o5">msg</a> = copy(value);
00083             }
00084         };
00085     <span class="keyword">private</span>:
00086         std::vector&lt;error_t&gt; errors;
00087         std::vector&lt;error_t&gt; warnings;
00088         <span class="keyword">const</span> <a class="code" href="classUTAP_1_1XPath.html">XPath</a> *currentPath;
00089         <span class="keywordtype">int</span> first_line, first_column, last_line, last_column;
00090     <span class="keyword">public</span>:
00091         <a class="code" href="classUTAP_1_1ErrorHandler.html#a0">ErrorHandler</a>();
00092 
00093         <span class="comment">// Sets the call back object for the current patch.</span>
00094         <span class="comment">// Clears the current position.</span>
00095         <span class="keywordtype">void</span> setCurrentPath(<span class="keyword">const</span> <a class="code" href="classUTAP_1_1XPath.html">XPath</a> *path);
00096 
00097         <span class="comment">// Sets the current position of the parser. Any errors or</span>
00098         <span class="comment">// warnings will be assumed to be at this position.</span>
00099         <span class="keywordtype">void</span> setCurrentPosition(<span class="keywordtype">int</span> first_line, <span class="keywordtype">int</span> first_column, <span class="keywordtype">int</span> last_line, <span class="keywordtype">int</span> last_column);
00100 
00101         <span class="comment">// Sets the current position of the parser. Any errors or</span>
00102         <span class="comment">// warnings will be assumed to be at this position.</span>
00103         <span class="keywordtype">void</span> setCurrentPosition(<span class="keyword">const</span> <a class="code" href="structUTAP_1_1position__t.html">position_t</a> &amp;);
00104 
00105         <span class="comment">// Called when an error is detected</span>
00106         <span class="keywordtype">void</span> handleError(<span class="keyword">const</span> <span class="keywordtype">char</span> *, ...);
00107 
00108         <span class="comment">// Called when a warning is issued</span>
00109         <span class="keywordtype">void</span> handleWarning(<span class="keyword">const</span> <span class="keywordtype">char</span> *, ...);
00110 
00111         <span class="comment">// Returns the errors</span>
00112         <span class="keyword">const</span> std::vector&lt;error_t&gt; &amp;<a class="code" href="classUTAP_1_1ErrorHandler.html#a6">getErrors</a>() const;
00113 
00114         <span class="comment">// Returns the warnings</span>
00115         const std::vector&lt;error_t&gt; &amp;getWarnings() const;
00116 
00117         <span class="comment">// True if there are one or more errors</span>
00118         <span class="keywordtype">bool</span> hasErrors() const;
00119 
00120         <span class="comment">// True if there are one or more warnings</span>
00121         <span class="keywordtype">bool</span> hasWarnings() const;
00122 
00123         <span class="comment">// Clears the list of errors and warnings</span>
00124         <span class="keywordtype">void</span> clear();
00125     };
00126 
<a name="l00127"></a><a class="code" href="namespaceUTAP_1_1Constants.html">00127</a>     namespace Constants
00128     {
<a name="l00129"></a><a class="code" href="namespaceUTAP_1_1Constants.html#a54">00129</a>         <span class="keyword">enum</span> <a class="code" href="namespaceUTAP_1_1Constants.html#a54">kind_t</a> {
00130             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a0">PLUS</a> = 0,
00131             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a1">MINUS</a> = 1,
00132             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a2">MULT</a> = 2,
00133             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a3">DIV</a> = 3,
00134             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a4">MOD</a> = 4,
00135             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a5">BIT_AND</a> = 5,
00136             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a6">BIT_OR</a> = 6,
00137             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a7">BIT_XOR</a> = 7,
00138             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a8">BIT_LSHIFT</a> = 8,
00139             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a9">BIT_RSHIFT</a> = 9,
00140             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a10">AND</a> = 10,
00141             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a11">OR</a> = 11,
00142             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a12">MIN</a> = 12,
00143             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a13">MAX</a> = 13,
00144 
00145             <span class="comment">/********************************************************</span>
00146 <span class="comment">             * Relational operators</span>
00147 <span class="comment">             */</span>
00148             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a14">LT</a> = 20,
00149             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a15">LE</a> = 21,
00150             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a16">EQ</a> = 22,
00151             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a17">NEQ</a> = 23,
00152             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a18">GE</a> = 24,
00153             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a19">GT</a> = 25,
00154 
00155             <span class="comment">/********************************************************</span>
00156 <span class="comment">             * Unary operators</span>
00157 <span class="comment">             */</span>
00158             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a20">NOT</a> = 30,
00159 
00160             <span class="comment">/********************************************************</span>
00161 <span class="comment">             * Assignment operators</span>
00162 <span class="comment">             */</span>
00163             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a21">ASSIGN</a> = 40,
00164             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a22">ASSPLUS</a> = 41,
00165             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a23">ASSMINUS</a> = 42,
00166             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a24">ASSDIV</a> = 43,
00167             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a25">ASSMOD</a> = 44,
00168             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a26">ASSMULT</a> = 45,
00169             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a27">ASSAND</a> = 46,
00170             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a28">ASSOR</a> = 47,
00171             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a29">ASSXOR</a> = 48,
00172             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a30">ASSLSHIFT</a> = 49,
00173             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a31">ASSRSHIFT</a> = 50,
00174 
00175             <span class="comment">/*******************************************************</span>
00176 <span class="comment">             * CTL Quantifiers</span>
00177 <span class="comment">             */</span>
00178             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a32">EF</a> = 60,
00179             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a33">EG</a> = 61,
00180             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a34">AF</a> = 62,
00181             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a35">AG</a> = 63,
00182             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a36">LEADSTO</a> = 64,
00183 
00184             <span class="comment">/*******************************************************</span>
00185 <span class="comment">             * Additional constants used by ExpressionProgram's and</span>
00186 <span class="comment">             * the TypeCheckBuilder (but not by the parser, although</span>
00187 <span class="comment">             * some of then ought to be used, FIXME).</span>
00188 <span class="comment">             */</span>
00189             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a37">IDENTIFIER</a> = 512,
00190             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a38">CONSTANT</a> = 513,
00191             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a39">ARRAY</a> = 514,
00192             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a40">POSTINCREMENT</a> = 515,
00193             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a41">PREINCREMENT</a> = 516,
00194             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a42">POSTDECREMENT</a> = 517,
00195             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a43">PREDECREMENT</a> = 518,
00196             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a44">UNARY_MINUS</a> = 519,
00197             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a45">LIST</a> = 520,
00198             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a46">DOT</a> = 521,
00199             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a47">INLINEIF</a> = 522,
00200             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a48">COMMA</a> = 523,
00201             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a49">SYNC</a> = 525,
00202             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a50">DEADLOCK</a> = 526,
00203             <a class="code" href="namespaceUTAP_1_1Constants.html#a54a51">FUNCALL</a> = 527
00204         };
00205 
00206         <span class="comment">/**********************************************************</span>
00207 <span class="comment">         * Synchronisations:</span>
00208 <span class="comment">         */</span>
<a name="l00209"></a><a class="code" href="namespaceUTAP_1_1Constants.html#a55">00209</a>         <span class="keyword">enum</span> <a class="code" href="namespaceUTAP_1_1Constants.html#a55">synchronisation_t</a> {
00210             <a class="code" href="namespaceUTAP_1_1Constants.html#a55a52">SYNC_QUE</a> = 0,
00211             <a class="code" href="namespaceUTAP_1_1Constants.html#a55a53">SYNC_BANG</a> = 1
00212         };
00213     }
00214 }
00215 
00216 std::ostream &amp;<a class="code" href="namespaceUTAP.html#a0">operator &lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structUTAP_1_1ErrorHandler_1_1error__t.html">UTAP::ErrorHandler::error_t</a> &amp;e);
00217 
00218 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 12:33:41 2004 for libutap by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
